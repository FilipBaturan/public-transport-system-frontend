<div class="wrapper">
  <app-nav-bar></app-nav-bar>
  <div id="content">
      <h1>Operators</h1>
    <h3 *ngIf="operators.length == 0">There are no operators in your system.
       You can add them by pressing the button below.</h3>

    <div class="example-container mat-elevation-z8">

      <table *ngIf="operators.length != 0" mat-table [dataSource]="operators">

        <!--- Note that these columns can be defined in any order.
                  The actual rendered columns are set as a property on the row definition" -->

        <!-- Position Column -->
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef>First Name </th>
          <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef> Last Name </th>
          <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="userName">
          <th mat-header-cell *matHeaderCellDef> Username </th>
          <td mat-cell *matCellDef="let element"> {{element.username}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef> Email </th>
          <td mat-cell *matCellDef="let element"> {{element.email}} </td>
        </ng-container>

        <ng-container matColumnDef="change">
          <th mat-header-cell *matHeaderCellDef> Change Operator </th>
          <td mat-cell *matCellDef="let element" (click)="$event.stopPropagation()">
            <button mat-raised-button color="primary" (click)="showChangeForm(element)">Change</button>
          </td>
        </ng-container>

        <ng-container matColumnDef="delete">
          <th mat-header-cell *matHeaderCellDef> Block Operator </th>
          <td mat-cell *matCellDef="let element" (click)="$event.stopPropagation()">
            <button mat-raised-button color="success" (click)="blockOperator(element)">Block</button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <button mat-raised-button color="add" [hidden]="formShowed" id = "addOperatorButton"
     (click) = "showForm()">Add operator</button>

    <div id = "regDiv" [hidden]="!formShowed">
      <mat-toolbar>
        <span>New Operator</span>
      </mat-toolbar>
       
        <form id = "addOperatorForm" class="my-form">
          <mat-card-content>
            <form class="my-form">
                <mat-form-field class="full-width">
                      <mat-label>First Name</mat-label>
                      <input  matInput  placeholder="First name"  name="fname"
                       [(ngModel)]="newUser.firstName" required>
                    </mat-form-field>
                    <mat-form-field class="full-width">
                      <mat-label>Last Name</mat-label>
                      <input  matInput  placeholder="Last Name" name="lname" 
                      [(ngModel)]="newUser.lastName"  required>
                    </mat-form-field>
                    <mat-form-field class="full-width">
                      <mat-label>Username</mat-label>
                      <input  matInput  placeholder="Address" name="address"
                      [(ngModel)]="newUser.username"  required>
                    </mat-form-field>
                    <mat-form-field class="full-width">
                      <mat-label>Email</mat-label>
                      <input  matInput  placeholder="Email" name="email" [(ngModel)]="newUser.email">
                    </mat-form-field>
                    <mat-form-field class="full-width">
                        <mat-label>Password</mat-label>
                        <input  matInput  placeholder="Password" name = "password" 
                        [(ngModel)]="newUser.password">
                      </mat-form-field>
                    <mat-form-field class="full-width">
                      <mat-label>Telephone</mat-label>
                      <input  matInput  placeholder="Telephone" name = "telephone"
                       [(ngModel)]="newUser.telephone">
                    </mat-form-field>
                    <mat-card-actions>
                        <button id = "formAddButton" mat-raised-button (click)="addOperator()"
                          color="primary">
                          {{addName == true ? "Add operator" : 'Change operator'}}
                        </button>

                        <button mat-raised-button (click)="cancelForm()" 
                          color="primary">
                          Cancel
                          </button>
                     </mat-card-actions>
            </form>
          </mat-card-content>
        </form>
         
    </div>
  </div>
</div>