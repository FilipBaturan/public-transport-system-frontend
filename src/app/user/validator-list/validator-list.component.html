<div class="wrapper">
  <app-nav-bar></app-nav-bar>
  <div id="content">
    <h1>Validators</h1>
    <h3 *ngIf="validators.length == 0">There is not a single validator in your system</h3>

    <div id = "mainDiv">
      <div class="example-container mat-elevation-z8">

        <table id = "validatorsTable" *ngIf="validators.length != 0" mat-table [dataSource]="validators">
      
          <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef>First Name </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>
      
          
          <ng-container matColumnDef="lastName">
            <th mat-header-cell *matHeaderCellDef> Last Name </th>
            <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
          </ng-container>
      
        
          <ng-container matColumnDef="userName">
            <th mat-header-cell *matHeaderCellDef> Username </th>
            <td mat-cell *matCellDef="let element"> {{element.username}} </td>
          </ng-container>
      
          
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef> Email </th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
          </ng-container>
      
          <ng-container matColumnDef="change">
            <th mat-header-cell *matHeaderCellDef> Change Validator </th>
            <td mat-cell *matCellDef="let element" (click)="$event.stopPropagation()">
              <button mat-raised-button color="primary"
              (click) = "showChangeForm(element)">Change</button>
            </td>
          </ng-container>
      
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef> Block Validator </th>
            <td mat-cell *matCellDef="let element" (click)="$event.stopPropagation()">
              <button mat-raised-button color= "success"
               (click) = "blockValidator(element)">Block</button>
            </td>
          </ng-container>
      
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      
      </div>

      <button mat-raised-button color="add" [hidden]="formShowed" id = "addButton" 
      (click) = "showForm()">Add validator</button>

      <div id = "regDiv" [hidden]="!formShowed">
        <mat-toolbar>
          <span id = "spanId">{{newUser.id == null ? 
            "New validator" : newUser.name + ' ' + newUser.lastName}}</span>
        </mat-toolbar>
        
          <form id = "addForm" class="my-form">
            <mat-card-content>
              <form class="my-form" [formGroup]="formGroup">
                <mat-form-field class="full-width">
                  <mat-label>First Name</mat-label>
                  <input  matInput  placeholder="First name"  name="fname"
                  [(ngModel)]="newUser.name" formControlName = "fname">
                </mat-form-field>
                <mat-form-field class="full-width">
                  <mat-label>Last Name</mat-label>
                  <input  matInput  placeholder="Last Name" name="lname" 
                  [(ngModel)]="newUser.lastName"  formControlName = "lname">
                </mat-form-field>
                <mat-form-field class="full-width">
                  <mat-label>Username</mat-label>
                  <input  matInput  placeholder="Username" name="username"
                  [(ngModel)]="newUser.username"  formControlName = "username">
                </mat-form-field>
                <mat-form-field class="full-width">
                  <mat-label>Email</mat-label>
                  <input  matInput  placeholder="Email" name="email" 
                  [(ngModel)]="newUser.email" formControlName = "email">
                </mat-form-field>
                <mat-form-field class="full-width">
                  <mat-label>Telephone</mat-label>
                  <input  matInput  placeholder="Telephone" name = "telephone"
                  [(ngModel)]="newUser.telephone" formControlName = "telephone">
                </mat-form-field>
                <mat-card-actions>
                    <button id = "formAddButton" mat-raised-button (click)="addValidator()" 
                    color="primary">
                    {{addName ==true ? "Add validator" : 'Change validator'}}
                    </button>

                    <button mat-raised-button (click)="cancelForm()" 
                    color="primary">
                    Cancel
                    </button>
                </mat-card-actions>
              </form>
            </mat-card-content>
          </form>
          
      </div>

    
      

    </div>
  </div>
</div>

   
   
